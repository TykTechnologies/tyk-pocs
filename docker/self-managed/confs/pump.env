### =============================================================================
### TYK PUMP ENVIRONMENT CONFIGURATION
### =============================================================================
### Default values are set for DEVELOPMENT environments. Comments describe PRODUCTION or PERFORMANCE tuning.
### =============================================================================

### -----------------------------------------------------------------------------
### GENERAL SETTINGS
### -----------------------------------------------------------------------------
TYK_PMP_LOGLEVEL=info # PROD: Set to "error" to reduce log volume
TYK_PMP_PURGEDELAY=2 # Seconds between purge cycles. PROD: Can be set to 1 for high traffic
TYK_PMP_DONTPURGEUPTIMEDATA=false
# TYK_PMP_LOGFORMAT=text # Options: text, json
# TYK_PMP_HEALTHCHECKENDPOINTPORT= # PROD: set Port for health check endpoint
# TYK_PMP_HEALTHCHECKENDPOINTNAME=hello # PROD: set Health check endpoint path

### -----------------------------------------------------------------------------
### ANALYTICS STORAGE (Redis - Source). Pump reads analytics data from Redis (written by Gateway(s))
### -----------------------------------------------------------------------------
TYK_PMP_ANALYTICSSTORAGETYPE=redis
TYK_PMP_ANALYTICSSTORAGECONFIG_ADDRS=tyk-redis:6379 # PROD: Use Redis Cluster e.g. ["server1:6379","server2:6380","server3:6381"]
TYK_PMP_ANALYTICSSTORAGECONFIG_USERNAME=
TYK_PMP_ANALYTICSSTORAGECONFIG_PASSWORD=
TYK_PMP_ANALYTICSSTORAGECONFIG_DATABASE=0
TYK_PMP_ANALYTICSSTORAGECONFIG_ENABLECLUSTER=false # PROD/PERFORMANCE: Set to true for Redis Cluster
# TYK_PMP_ANALYTICSSTORAGECONFIG_USESSL=true # PROD: Set to true for secure Redis connections
# TYK_PMP_ANALYTICSSTORAGECONFIG_SSLINSECURESKIPVERIFY=false # PROD: Keep false to validate Redis SSL certificates
# TYK_PMP_ANALYTICSSTORAGECONFIG_MAXIDLE=5000 # PROD/PERFORMANCE: SET high Max idle connections
# TYK_PMP_ANALYTICSSTORAGECONFIG_MAXACTIVE=10000 # PROD/PERFORMANCE: SET high Max active connections

### -----------------------------------------------------------------------------
### SQL PUMP - NON-AGGREGATED DATA. Stores raw analytics records in PostgreSQL
### -----------------------------------------------------------------------------
TYK_PMP_PUMPS_SQL_TYPE=sql
TYK_PMP_PUMPS_SQL_META_TYPE=postgres
TYK_PMP_PUMPS_SQL_META_CONNECTIONSTRING=host=tyk-postgres port=5432 dbname=tyk_analytics user=tykuser password=tykSecurePass123 sslmode=disable # PROD: Use Secrets Manager
# TYK_PMP_PUMPS_SQL_META_TABLESHARDING=true # PROD/PERFORMANCE: Enable table sharding

### -----------------------------------------------------------------------------
### SQL AGGREGATE PUMP - AGGREGATED DATA. Stores aggregated analytics for Dashboard charts/reports in PostgreSQL
### -----------------------------------------------------------------------------
TYK_PMP_PUMPS_SQLAGGREGATE_TYPE=sql_aggregate
TYK_PMP_PUMPS_SQLAGGREGATE_META_TYPE=postgres
TYK_PMP_PUMPS_SQLAGGREGATE_META_CONNECTIONSTRING=host=tyk-postgres port=5432 dbname=tyk_analytics user=tykuser password=tykSecurePass123 sslmode=disable # PROD: Use Secrets Manager
TYK_PMP_PUMPS_SQLAGGREGATE_META_TRACKALLPATHS=true # Default false, Set to true to track all API paths in analytics
# TYK_PMP_PUMPS_SQLAGGREGATE_META_TABLESHARDING=true # PROD/PERFORMANCE: Enable table sharding for large datasets

### -----------------------------------------------------------------------------
### UPTIME PUMP. Stores uptime logs in PostgreSQL
### -----------------------------------------------------------------------------
TYK_PMP_UPTIMEPUMPCONFIG_UPTIMETYPE=sql
TYK_PMP_UPTIMEPUMPCONFIG_TYPE=postgres
TYK_PMP_UPTIMEPUMPCONFIG_CONNECTIONSTRING=host=tyk-postgres port=5432 dbname=tyk_analytics user=tykuser password=tykSecurePass123 sslmode=disable # PROD: Use Secrets Manager
TYK_PMP_UPTIMEPUMPCONFIG_LOGLEVEL=error
# TYK_PMP_UPTIMEPUMPCONFIG_TABLESHARDING=true # PROD/PERFORMANCE: Enable table sharding