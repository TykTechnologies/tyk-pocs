### =============================================================================
### TYK DASHBOARD ENVIRONMENT CONFIGURATION
### =============================================================================
### Default values are set for DEVELOPMENT environments. Comments describe PRODUCTION or PERFORMANCE tuning.
### =============================================================================

### -----------------------------------------------------------------------------
### GENERAL & CONNECTIVITY
### -----------------------------------------------------------------------------
TYK_DB_LICENSEKEY=${TYK_LICENSE_KEY} # Dashboard license key (required)
TYK_DB_LISTENPORT=3000
TYK_DB_ADMINSECRET=admin-secret # PROD - SECURITY: Change to a strong secret for production. Use Secrets Manager
TYK_DB_NODESECRET=352d20ee67be67f6340b4c0605b044b7 # PROD -  SECURITY: Change to a strong 32+ character string, must match Gateway
TYK_DB_HOMEDIR=/opt/tyk-dashboard
TYK_DB_PAGESIZE=10
TYK_DB_HASHKEYS=true # Must match TYK_GW_HASHKEYS on Gateway
TYK_DB_ENABLEMASTERKEYS=false
TYK_DB_ENABLEOWNERSHIP=true # Enables API ownership feature
TYK_DB_ENABLEDUPLICATESLUGS=true # Allows duplicate API slugs across different APIs
TYK_DB_SHOWORGID=true
TYK_DB_MAINTENANCEMODE=false
TYK_DB_NOTIFYONCHANGE=true
TYK_DB_HIDELISTENPATH=false
# TYK_DB_LOGLEVEL= # PROD: Set to "error" to reduce log volume
# TYK_DB_PRIVATEKEYPATH=/opt/tyk-dashboard/certs/private-key.pem # Path to private key for signing notifications coming to the gateways

### -----------------------------------------------------------------------------
### KEY MANAGEMENT BY HASH
### -----------------------------------------------------------------------------
TYK_DB_ENABLEDELETEKEYBYHASH=true
TYK_DB_ENABLEUPDATEKEYBYHASH=true
TYK_DB_ENABLEHASHEDKEYSLISTING=true

### -----------------------------------------------------------------------------
### GATEWAY CONNECTION
### -----------------------------------------------------------------------------
TYK_DB_TYKAPI_HOST=http://tyk-gateway # URL to Gateway (Node)
TYK_DB_TYKAPI_PORT=8080
TYK_DB_TYKAPI_SECRET=352d20ee67be67f6340b4c0605b044b7 # SECURITY: Must match TYK_GW_SECRET on Gateway

### -----------------------------------------------------------------------------
### REDIS CONFIGURATION
### -----------------------------------------------------------------------------
TYK_DB_REDISADDRS=tyk-redis:6379 # PROD: Use Redis Cluster e.g. ["server1:6379","server2:6380","server3:6381"]
TYK_DB_REDISPASSWORD=
TYK_DB_REDISDATABASE=0
TYK_DB_ENABLECLUSTER=false # PROD/PERFORMANCE: Set to true for Redis Cluster
TYK_DB_REDISUSESSL=false # PROD: Set to true for secure Redis connections
# TYK_DB_REDISSSLINSECURESKIPVERIFY=false # PROD: Keep false to validate Redis SSL certificates
# TYK_DB_REDISTIMEOUT= # Connection timeout in seconds (e.g. 15)
# TYK_DB_REDISMAXACTIVE= # PROD/PERFORMANCE: Max active Redis connections, Default 500, SET to a higher number if expecting traffic

### -----------------------------------------------------------------------------
### STORAGE CONFIGURATION (PostgreSQL)
### -----------------------------------------------------------------------------
TYK_DB_STORAGE_MAIN_TYPE=postgres
TYK_DB_STORAGE_MAIN_CONNECTIONSTRING=user=tykuser password=tykSecurePass123 host=tyk-postgres port=5432 database=tyk_dashboard sslmode=disable # PROD: Use Secrets Manager
TYK_DB_STORAGE_ANALYTICS_TYPE=postgres # Storage configuration for reading analytics data (Tyk Pump writes here)
TYK_DB_STORAGE_ANALYTICS_CONNECTIONSTRING=user=tykuser password=tykSecurePass123 host=tyk-postgres port=5432 database=tyk_analytics sslmode=disable # PROD: Use Secrets Manager
TYK_DB_ENABLEAGGREGATELOOKUPS=true # Enables aggregated analytics queries
# TYK_DB_STORAGE_MAIN_TABLESHARDING=true # PROD/PERFORMANCE: Enable table sharding
# TYK_DB_STORAGE_ANALYTICS_TABLESHARDING=true # PROD/PERFORMANCE: Enable table sharding for analytics
# TYK_DB_STORAGE_LOGS_TYPE=postgres # PROD: storage configuration for logs
# TYK_DB_STORAGE_LOGS_CONNECTIONSTRING= # Connection string for logs storage
# TYK_DB_STORAGE_LOGS_TABLESHARDING=true
# TYK_DB_STORAGE_UPTIME_TYPE=postgres # PROD: storage configuration for uptime data
# TYK_DB_STORAGE_UPTIME_CONNECTIONSTRING= # Connection string for uptime storage
# TYK_DB_STORAGE_UPTIME_TABLESHARDING=true

### -----------------------------------------------------------------------------
### HOST & DOMAIN CONFIGURATION
### -----------------------------------------------------------------------------
TYK_DB_HOSTCONFIG_ENABLEHOSTNAMES=true
TYK_DB_HOSTCONFIG_HOSTNAME=tyk-dashboard # PROD: Set to your Dashboard domain
TYK_DB_HOSTCONFIG_GATEWAYHOSTNAME=tyk-gateway:8080 # PROD: Set to Gateway hostname:port
TYK_DB_HOSTCONFIG_SECURECOOKIES=false # PROD: Set to true

### -----------------------------------------------------------------------------
### SECURITY
### -----------------------------------------------------------------------------
TYK_DB_SECURITY_ALLOWADMINRESETPASSWORD=true # Allow admin to reset user passwords
TYK_DB_SECURITY_LOGINDISALLOWFORWARDPROXY=false
TYK_DB_SECURITY_USERPASSWORDMAXDAYS=0 # PROD: Set password expiry (e.g. 90 days)
TYK_DB_SECURITY_ENFORCEPASSWORDHISTORY=0 # PROD: Set to prevent password reuse (e.g. 5)
TYK_DB_SECURITY_FORCEFIRSTLOGINPWRESET=false # PROD: Set to true to force password change on first login
TYK_DB_SECURITY_ENABLECONTENTSECURITYPOLICY=false
TYK_DB_SECURITY_FORBIDADMINVIEWACCESSTOKEN=false # Security: set to true to prevent admins from viewing access tokens
TYK_DB_SECURITY_FORBIDADMINRESETACCESSTOKEN=false # Security: set to true prevent admins from resetting access tokens
TYK_DB_SECURITY_OPENPOLICY_ENABLED=true # Enables Open Policy Agent integration
TYK_DB_SECURITY_OPENPOLICY_ENABLEAPI=true # Security: Set to false to disable OPA API access
# TYK_DB_SECURITY_ADDITIONALPERMISSIONS= You can set a list of additional permissions, that can be applied for users or user groups.
# TYK_DB_SECURITY_LOGINFAILUREUSERNAMELIMIT=0 # 0 = unlimited login attempts per username
# TYK_DB_SECURITY_LOGINFAILUREIPLIMIT=0 # 0 = unlimited login attempts per IP
# TYK_DB_SECURITY_LOGINFAILUREEXPIRATION=900 # Time in seconds before login failure count resets

### -----------------------------------------------------------------------------
### AUDIT LOGGING, HTTP SERVER & SSL, TIB (SSO)
### -----------------------------------------------------------------------------
TYK_DB_AUDIT_ENABLED=false # PROD: Set to true for audit trail
TYK_DB_AUDIT_FORMAT=text # Options: text, json
TYK_DB_AUDIT_STORETYPE=db # Options: db (shows in Dashboard), file, no-op. db can increase DB size.
# TYK_DB_AUDIT_PATH= # Required if STORETYPE=file
# TYK_DB_AUDIT_DETAILEDRECORDING=false # PROD: Keep false, enable only for debugging (increases storage)
TYK_DB_HTTPSERVEROPTIONS_USESSL=false # PROD: Set to true to enable SSL/TLS
# TYK_DB_HTTPSERVEROPTIONS_SSLINSECURESKIPVERIFY=false # PROD: Set to false to validate SSL certificates
# TYK_DB_HTTPSERVEROPTIONS_SSLCERTIFICATES= # PROD: Path to SSL cert (PEM) or cert ID from Tyk Certificate Store
TYK_DB_TIB_ENABLED=true # Enables built-in Identity Broker for SSO
# TYK_DB_SSOCUSTOMLOGINURL= # Custom SSO login URL 

### -----------------------------------------------------------------------------
### UI & FRONTEND
### -----------------------------------------------------------------------------
TYK_DB_UI_HIDEHELP=false
TYK_DB_UI_DEFAULTLANG=en
TYK_DB_UI_DONTALLOWLICENSEMANAGEMENT=false
TYK_DB_STREAMING_ENABLED=true # Enables Tyk Streams UI. Set to false if not using streaming.
# TYK_DB_UI_LANGUAGES=English:en # Available languages in UI
# TYK_DB_DISABLEPARALLELSESSIONS=false # Prevent users from having multiple active sessions
